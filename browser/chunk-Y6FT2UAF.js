import{a as J,c as I,d as N,e as K,f as X,g as Z}from"./chunk-KMM5IKCE.js";import{j as W,l as x,t as H}from"./chunk-T5HBP262.js";import{Bb as D,Cb as b,Nb as m,Oa as l,Ob as f,Qb as o,Sb as g,Ta as Q,Vb as G,Wb as L,Xb as Y,Ya as p,Z as j,Zb as P,_b as M,ca as k,da as S,ec as O,ia as U,ic as E,ma as v,mb as _,ob as T,q as h,sb as d,tb as n,ub as i,vb as s,y,zb as z}from"./chunk-7ATZPMEV.js";var le=r=>({workQueueTableColumns:r});function se(r,a){if(r&1){let e=z();n(0,"div",2)(1,"button",3),D("click",function(){k(e);let c=b(2);return S(c.setActiveTab(""))}),o(2),i(),n(3,"button",3),D("click",function(){k(e);let c=b(2);return S(c.setActiveTab(c.workStatus.new))}),o(4),i(),n(5,"button",3),D("click",function(){k(e);let c=b(2);return S(c.setActiveTab(c.workStatus.pending))}),o(6),i(),n(7,"button",3),D("click",function(){k(e);let c=b(2);return S(c.setActiveTab(c.workStatus.completed))}),o(8),i()(),s(9,"app-table",4)}if(r&2){let e=b(),t=b();l(),f("active",t.workStatusTab()===""),l(),g(" Assigned to me (",t.workQueueTableDetails().length,") "),l(),f("active",t.workStatusTab()===t.workStatus.new),l(),g(" New (",t.workQueueTableDetailsByStatus()[t.workStatus.new].length,") "),l(),f("active",t.workStatusTab()===t.workStatus.pending),l(),g(" Pending Review (",t.workQueueTableDetailsByStatus()[t.workStatus.pending].length,") "),l(),f("active",t.workStatusTab()===t.workStatus.completed),l(),g(" Completed (",t.workQueueTableDetailsByStatus()[t.workStatus.completed].length,") "),l(),d("displayedColumns",e.workQueueTableColumns)("dataSourceDetails",t.workQueueTableSource())("showFilter",!1)}}function ce(r,a){r&1&&(n(0,"div",0)(1,"h2",1),o(2,"Work Queue"),i(),_(3,se,10,15),i()),r&2&&(l(3),T(a.workQueueTableColumns?3:-1))}var V=class r{constructor(a){this.dataService=a}workQueueTableColumns$;workQueueTableDetails$;workStatusTab=v("");workQueueTableDetails=v([]);workQueueTableDetailsByStatus=v({});workQueueTableSource=O(()=>this.workStatusTab()?this.workQueueTableDetailsByStatus()[this.workStatusTab()]:this.workQueueTableDetails());destroyRef=j(U);workStatus=J;ngOnInit(){this.workQueueTableDetails$=this.dataService.getWorkQueue().pipe(y(a=>!!a?.length),h(a=>a.map(e=>({originator:{data:e.originator,type:"user",textColor:"default"},client:{data:e.client,type:"text",textColor:"default"},type:{data:e.type,type:"text",textColor:"default"},status:{data:{name:e.status,color:e.status==="New"?"primary":e.status==="Pending Review"?"warning":"success"},type:"status",textColor:"default"},created:{data:e.created,type:"text",textColor:"default"}})))),this.workQueueTableDetails$.pipe(H(this.destroyRef)).subscribe(a=>{this.workQueueTableDetails.set(a),this.workQueueTableDetailsByStatus.set(a.reduce((e,t)=>{let R=t.status?.data?.name;return e[R]?e[R].push(t):e[R]=[t],e},{}))}),this.workQueueTableColumns$=this.workQueueTableDetails$.pipe(y(a=>!!a?.length),h(a=>Object.keys(a[0]).map(t=>({key:t,label:t==="client"?"Client/Line":t}))))}setActiveTab(a){this.workStatusTab.set(a)}static \u0275fac=function(e){return new(e||r)(Q(N))};static \u0275cmp=p({type:r,selectors:[["app-work-queue"]],decls:2,vars:5,consts:[[1,"card-container","h-100"],[1,"card-title"],[1,"d-flex","gap-1","align-items-center","flex-wrap","btn-container"],["type","button",1,"btn","btn-tab",3,"click"],[3,"displayedColumns","dataSourceDetails","showFilter"]],template:function(e,t){if(e&1&&(_(0,ce,4,1,"div",0),P(1,"async")),e&2){let c;T((c=L(3,le,M(1,1,t.workQueueTableColumns$)))?0:-1,c)}},dependencies:[x,W,I],styles:[".btn-container[_ngcontent-%COMP%]{margin-bottom:25px}.btn-tab[_ngcontent-%COMP%]{height:auto;background:var(--dark);border-radius:25px;padding:6px 16px;color:var(--text-medium);font-size:16px;line-height:18px}.btn-tab[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary)}.btn-tab.active[_ngcontent-%COMP%]{background:var(--primary);color:var(--white)}"],changeDetection:0})};var B=class r{target=E.required();current=E.required();change=E.required();yellowWidth=20;redWidth=O(()=>100-this.yellowWidth-this.current());currentPosition=O(()=>this.current()+this.change());static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-progress-bar-with-parts"]],inputs:{target:[1,"target"],current:[1,"current"],change:[1,"change"]},decls:13,vars:23,consts:[[1,"performance-bar-container"],[1,"target-label"],[1,"target-arrow"],[1,"bar"],[1,"bar-segment","green"],[1,"bar-segment","yellow"],[1,"bar-segment","red"],[1,"current-label"],[1,"current-arrow"],[1,"change-label"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1),o(2),i(),s(3,"div",2),n(4,"div",3),s(5,"div",4)(6,"div",5)(7,"div",6),n(8,"div",7),o(9),i(),s(10,"div",8),i(),n(11,"div",9),o(12),i()()),e&2&&(l(),m("left",t.target(),"%"),l(),g("TG:",t.target(),"%"),l(),m("left",t.target(),"%"),l(2),m("width",t.current(),"%"),l(),m("width",t.yellowWidth,"%"),l(),m("width",t.redWidth(),"%"),l(),m("left",t.currentPosition(),"%"),l(),g("",t.current(),"%"),l(),m("left",t.currentPosition(),"%"),l(),m("left",t.currentPosition(),"%"),f("good",t.change()<=0)("bad",t.change()>0),l(),g(" ",t.change()<0?t.change()+"% (GOOD)":t.change()===0?"ON TARGET":t.change()+"% (BAD)"," "))},styles:[".performance-bar-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:500px;height:100%;padding:30px 0;font-family:sans-serif;color:#fff;text-align:center}.bar[_ngcontent-%COMP%]{display:flex;height:25px;border-radius:100px;overflow:hidden}.bar-segment[_ngcontent-%COMP%]{height:100%}.green[_ngcontent-%COMP%]{background-color:var(--success)}.yellow[_ngcontent-%COMP%]{background-color:var(--warning)}.red[_ngcontent-%COMP%]{background-color:var(--danger)}.target-label[_ngcontent-%COMP%], .current-label[_ngcontent-%COMP%]{position:absolute;font-size:10px;font-weight:500}.target-label[_ngcontent-%COMP%]{top:4px;color:var(--text-dark);transform:translate(-50%)}.current-label[_ngcontent-%COMP%]{top:37px;color:var(--text-light);transform:translate(-20%)}.target-arrow[_ngcontent-%COMP%], .current-arrow[_ngcontent-%COMP%]{position:absolute;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;transform:translate(-50%)}.target-arrow[_ngcontent-%COMP%]{top:18px}.target-arrow[_ngcontent-%COMP%]{border-top:12px solid var(--primary)}.current-arrow[_ngcontent-%COMP%]{border-bottom:12px solid var(--success);top:55px;transform:translate(-50%)}.change-label[_ngcontent-%COMP%]{position:absolute;margin-top:15px;font-size:10px;transform:translate(-50%);width:100%}.change-label.good[_ngcontent-%COMP%]{color:var(--success)}.change-label.bad[_ngcontent-%COMP%]{color:var(--danger)}"],changeDetection:0})};var $=class r{progressVisible=v(!1);ngOnInit(){setTimeout(()=>{this.progressVisible.set(!0)},200)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-portfolio-goals"]],decls:15,vars:12,consts:[[1,"card-container"],[1,"card-title"],[1,"progress-title"],[1,"progress-bar",3,"target","current","change"],["actualText","$8M","targetText","$12M",1,"progress-bar",3,"actual","target","progressVisible"],["actualText","$28.4M","targetText","$42M",1,"progress-bar",3,"actual","target","progressVisible"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h2",1),o(2,"Portfolio goals"),i(),n(3,"label",2),o(4,"Portfolio loss ratio target"),i(),s(5,"app-progress-bar-with-parts",3),n(6,"label",2),o(7,"Renewal retention"),i(),s(8,"app-progress-bar-with-parts",3),n(9,"label",2),o(10,"New business target"),i(),s(11,"app-progress-gradient",4),n(12,"label",2),o(13,"Annual gwp target"),i(),s(14,"app-progress-gradient",5),i()),e&2&&(l(5),d("target",55)("current",48.2)("change",-6.8),l(3),d("target",70)("current",70)("change",0),l(3),d("actual",8)("target",12)("progressVisible",t.progressVisible()),l(3),d("actual",28.4)("target",42)("progressVisible",t.progressVisible()))},dependencies:[B,K],styles:[".card-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.progress-bar[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px}"],changeDetection:0})};var F=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-quick-actions"]],decls:12,vars:0,consts:[[1,"card-container"],[1,"card-title"],[1,"btn-container","d-flex","flex-column"],["type","button",1,"btn","btn-primary"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h2",1),o(2,"Quick actions"),i(),n(3,"div",2)(4,"button",3),o(5,"New Submission"),i(),n(6,"button",3),o(7,"Quote Builder"),i(),n(8,"button",3),o(9,"Risks Models"),i(),n(10,"button",3),o(11,"Documents Upload"),i()()())},styles:[".btn-container[_ngcontent-%COMP%]{gap:5px}.btn[_ngcontent-%COMP%]{height:auto}"],changeDetection:0})};var A=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-market-intelligence"]],decls:15,vars:0,consts:[[1,"card-container"],[1,"card-title"],[1,"news-item","d-flex"],[1,"point","danger"],[1,"text-light","m-0"],[1,"point","warning"],[1,"point","primary-dark"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h2",1),o(2,"Market intelligence"),i(),n(3,"div",2),s(4,"div",3),n(5,"p",4),o(6,"Rate hardening in Cyber market - +15% YoY"),i()(),n(7,"div",2),s(8,"div",5),n(9,"p",4),o(10,"New capacity entering Marine market"),i()(),n(11,"div",2),s(12,"div",6),n(13,"p",4),o(14,"Environmental regulatory changes in CA"),i()()())},styles:[".news-item[_ngcontent-%COMP%]{gap:9px;padding:12px 0;border-bottom:1px solid var(--border)}.news-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300}.news-item[_ngcontent-%COMP%]:first-of-type{padding-top:0}.point[_ngcontent-%COMP%]{height:16px;min-height:16px;width:16px;min-width:16px;border-radius:50%}.point.danger[_ngcontent-%COMP%]{background-color:var(--danger-dark)}.point.warning[_ngcontent-%COMP%]{background-color:var(--warning)}.point.primary-dark[_ngcontent-%COMP%]{background-color:var(--primary-dark)}"],changeDetection:0})};var pe=(r,a)=>({accountsTableDetails:r,accountsTableColumns:a}),ee=()=>[];function ue(r,a){if(r&1&&(n(0,"div",0)(1,"app-table",1)(2,"h2",2),o(3,"My accounts"),i(),n(4,"div",3)(5,"button",4),o(6,"Filter"),i(),n(7,"button",5),o(8,"Sort"),i()()()()),r&2){let e=a;l(),d("displayedColumns",e.accountsTableColumns??G(3,ee))("dataSourceDetails",e.accountsTableDetails??G(4,ee))("showFilter",!0)}}var te=(u=>(u.account="Account name/type",u.line="Line",u.broker="Broker",u.date="Renewal date",u.premium="Premium",u.rated_premium="Rated premium",u.loss_ratio="Loss ratio",u.appetite="Appetite",u.status="Status",u.triage="Triage",u.winnability="Winnability",u))(te||{}),q=class r{constructor(a){this.dataService=a}accountsTableColumns$;accountsTableDetails$;ngOnInit(){this.accountsTableDetails$=this.dataService.getAccounts().pipe(y(a=>!!a?.length),h(a=>a.map(e=>({account:{data:e.account,type:"text",textColor:"default"},line:{data:e.line,type:"text",textColor:"default"},broker:{data:e.broker,type:"text",textColor:"default"},date:{data:e.date,type:"text",textColor:"default"},premium:{data:e.premium,type:"text",textColor:"primary"},rated_premium:{data:e.rated_premium,type:"text",textColor:"default"},loss_ratio:{data:e.loss_ratio,type:"label",textColor:this.getTextColorByRatioValue(e.loss_ratio)},appetite:{data:e.appetite?.toUpperCase(),type:"label",textColor:"dark-primary"},status:{data:{name:e.status,color:e.status==="Active"?"success":"primary"},type:"status",textColor:"default"},triage:{data:e.triage,type:"label-border",textColor:"primary"},winnability:{data:e.winnability,type:"strong",textColor:"primary"}})))),this.accountsTableColumns$=this.accountsTableDetails$.pipe(y(a=>!!a?.length),h(a=>Object.keys(a[0]).map(t=>({key:t,label:te[t]??t}))))}getTextColorByRatioValue(a){let e=Number(a.replace("%",""));return e<35?"success":e>=35&&e<50?"warning":"danger"}static \u0275fac=function(e){return new(e||r)(Q(N))};static \u0275cmp=p({type:r,selectors:[["app-my-accounts"]],decls:3,vars:8,consts:[[1,"card-container"],[3,"displayedColumns","dataSourceDetails","showFilter"],[1,"card-title"],[1,"buttons","d-flex","align-items-center","gap-1"],["matTooltip","Use search bar for filtering data table","matTooltipClass","tooltip","type","button",1,"btn","btn-outline-primary"],["matTooltip","Use column headers for sorting data table","matTooltipClass","tooltip","type","button",1,"btn","btn-outline-primary"]],template:function(e,t){if(e&1&&(_(0,ue,9,5,"div",0),P(1,"async"),P(2,"async")),e&2){let c;T((c=Y(5,pe,M(1,1,t.accountsTableDetails$),M(2,3,t.accountsTableColumns$)))?0:-1,c)}},dependencies:[x,W,Z,X,I],styles:[".card-title[_ngcontent-%COMP%]{margin:0}"],changeDetection:0})};var ae=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-dashboard"]],decls:10,vars:0,consts:[[1,"global-container"],[1,"work-queue-container","row","gap-1"],[1,"h-auto","col-12","col-auto-lg","d-flex","flex-column"],[1,"h-100"],[1,"h-auto","col-12","col-2-lg","d-flex","flex-column"],[1,"col-12","col-2-lg","h-auto","d-flex","flex-column","gap-1"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),s(3,"app-work-queue",3),i(),n(4,"div",4),s(5,"app-portfolio-goals",3),i(),n(6,"div",5),s(7,"app-quick-actions",3)(8,"app-market-intelligence",3),i()(),s(9,"app-my-accounts"),i())},dependencies:[x,V,$,F,A,q],styles:[".global-container[_ngcontent-%COMP%]{padding-bottom:60px}.work-queue-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:42px}"],changeDetection:0})};export{ae as Dashboard};
